{"ast":null,"code":"import _asyncToGenerator from \"D:/Angular/CenterApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { jwtDecode } from 'jwt-decode';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../header-customer.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"ngx-toastr\";\nimport * as i5 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i6 from \"src/app/homepage/products/products.service\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"../header-customer.component\";\nconst _c0 = [\"productquantity\"];\nfunction CustomerOrdersComponent_div_31_tr_38_table_4_tr_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r5.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r5.quantitiy);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", product_r5.totalPrice, \"$\");\n  }\n}\nfunction CustomerOrdersComponent_div_31_tr_38_table_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 55)(1, \"thead\")(2, \"tr\")(3, \"th\", 43);\n    i0.ɵɵtext(4, \"Product Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 43);\n    i0.ɵɵtext(6, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 43);\n    i0.ɵɵtext(8, \"Total Price\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"tbody\");\n    i0.ɵɵtemplate(10, CustomerOrdersComponent_div_31_tr_38_table_4_tr_10_Template, 7, 3, \"tr\", 30);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const order_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngForOf\", order_r3.products);\n  }\n}\nfunction CustomerOrdersComponent_div_31_tr_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\")(2, \"p\", 48);\n    i0.ɵɵlistener(\"click\", function CustomerOrdersComponent_div_31_tr_38_Template_p_click_2_listener() {\n      const order_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.toggleOrderDetails(order_r3));\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, CustomerOrdersComponent_div_31_tr_38_table_4_Template, 11, 1, \"table\", 49);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"td\", 50)(18, \"div\", 51)(19, \"button\", 52);\n    i0.ɵɵlistener(\"click\", function CustomerOrdersComponent_div_31_tr_38_Template_button_click_19_listener() {\n      const order_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.openEditOrderModal(order_r3.orderId));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(20, \"div\", 51)(21, \"button\", 53);\n    i0.ɵɵlistener(\"click\", function CustomerOrdersComponent_div_31_tr_38_Template_button_click_21_listener() {\n      const order_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.DeleteProduct(order_r3.orderId));\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"div\", 51)(23, \"button\", 54);\n    i0.ɵɵlistener(\"click\", function CustomerOrdersComponent_div_31_tr_38_Template_button_click_23_listener() {\n      const order_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.DeleteOrder(order_r3.orderId));\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const order_r3 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"active-order\", order_r3.orderId === ctx_r3.activeOrderId && order_r3.showDetails);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", order_r3.orderId, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", order_r3.showDetails);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r3.numberOfItems);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", order_r3.totalPrice, \"$\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r3.orderDate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r3.city);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r3.address);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(order_r3.orderStatus);\n  }\n}\nfunction CustomerOrdersComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42)(1, \"h4\", 43);\n    i0.ɵɵtext(2, \"Orders List\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"br\");\n    i0.ɵɵelementStart(4, \"div\", 44)(5, \"table\", 45)(6, \"thead\")(7, \"tr\")(8, \"td\", 46)(9, \"b\");\n    i0.ɵɵtext(10, \"Orders Details\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"tr\")(12, \"td\")(13, \"b\");\n    i0.ɵɵtext(14, \"Order ID\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"td\")(16, \"b\");\n    i0.ɵɵtext(17, \"# Of Items\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"td\")(19, \"b\");\n    i0.ɵɵtext(20, \"Order Total Price\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"td\")(22, \"b\");\n    i0.ɵɵtext(23, \"Order Date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"td\")(25, \"b\");\n    i0.ɵɵtext(26, \"City\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"td\")(28, \"b\");\n    i0.ɵɵtext(29, \"Address\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"td\")(31, \"b\");\n    i0.ɵɵtext(32, \"Status\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(33, \"td\")(34, \"b\")(35, \"u\");\n    i0.ɵɵtext(36, \"Modify Order\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementStart(37, \"tbody\");\n    i0.ɵɵtemplate(38, CustomerOrdersComponent_div_31_tr_38_Template, 24, 10, \"tr\", 30);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(39, \"h3\", 47);\n    i0.ɵɵtext(40);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(38);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.customerData);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Orders Total Price: \", ctx_r3.TotalPrice, \"$ \");\n  }\n}\nfunction CustomerOrdersComponent_ng_container_44_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"option\", 57);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const product_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"value\", product_r6.name);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", product_r6.name, \" \");\n  }\n}\nfunction CustomerOrdersComponent_ng_container_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CustomerOrdersComponent_ng_container_44_ng_container_1_Template, 3, 2, \"ng-container\", 56);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const product_r6 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.productExistsInOrder(product_r6.name));\n  }\n}\nfunction CustomerOrdersComponent_ng_container_46_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"option\", 57);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const product_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"value\", product_r7.name);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", product_r7.name, \" \");\n  }\n}\nfunction CustomerOrdersComponent_ng_container_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CustomerOrdersComponent_ng_container_46_ng_container_1_Template, 3, 2, \"ng-container\", 56);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const product_r7 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.productExistsInOrder(product_r7.name));\n  }\n}\nfunction CustomerOrdersComponent_option_74_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 57);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r8 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", product_r8.productName);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", product_r8.productName, \" \");\n  }\n}\nexport class CustomerOrdersComponent {\n  constructor(homepageCustomerService, datePipe, route, router, toastr, modalService, addProductService) {\n    this.homepageCustomerService = homepageCustomerService;\n    this.datePipe = datePipe;\n    this.route = route;\n    this.router = router;\n    this.toastr = toastr;\n    this.modalService = modalService;\n    this.addProductService = addProductService;\n    this.customerData = [];\n    this.Products = [];\n    this.activeOrderId = null;\n    this.setQuantityBySelect = 0;\n    this.addToProductList = [];\n    this.displayProductsToDelete = [];\n  }\n  ngOnInit() {\n    this.getAllProducts();\n    this.getUserOrder();\n    this.token = localStorage.getItem('token') || 'Looks Like there is an error with authintication';\n    this.decodedToken = jwtDecode(this.token);\n    this.customerId = this.decodedToken['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/CustomerId'];\n    this.customerName = this.decodedToken['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name'];\n  }\n  toggleOrderDetails(order) {\n    this.homepageCustomerService.getOrdersById(order.orderId).subscribe({\n      next: res => {\n        if (res.length !== 0) {\n          this.activeOrderId = order.orderId;\n          order.showDetails = !order.showDetails;\n        }\n      },\n      error: error => {\n        this.toastr.error('No Orders Found', 'error');\n      }\n    });\n  }\n  resetQuantity(quantity) {\n    if (parseInt(quantity) < 0) {\n      this.toastr.warning('Invalid Quantity', 'Warning');\n      this.productquantity.nativeElement.value = '0';\n    }\n  }\n  openEditOrderModal(orderId) {\n    this.orderId = orderId;\n    this.selectedQuantity = '';\n    this.selectedProductName = '';\n    this.setQuantityBySelect = 0;\n    $('#editOrderModal').modal('show');\n  }\n  DeleteProduct(orderId) {\n    this.orderId = orderId;\n    this.selectedQuantity = '';\n    this.selectedProductName = '';\n    this.setQuantityBySelect = 0;\n    this.displayProductsToDelete = [];\n    const findIndex = this.customerData.findIndex(item => item.orderId === this.orderId);\n    if (findIndex !== -1) {\n      this.customerData[findIndex].products.forEach(order => {\n        this.displayProductsToDelete.push({\n          productName: order.productName\n        });\n      });\n    }\n    $('#DeleteProductModal').modal('show');\n  }\n  CloseModel() {\n    this.orderId = '';\n    this.selectedQuantity = '';\n    this.selectedProductName = '';\n    this.setQuantityBySelect = 0;\n  }\n  getUserOrder() {\n    this.homepageCustomerService.getCustomerOrderList().subscribe({\n      next: data => {\n        const uniqueOrders = new Map();\n        data.forEach(order => {\n          if (!uniqueOrders.has(order.orderId)) {\n            uniqueOrders.set(order.orderId, {\n              ...order,\n              products: []\n            });\n          }\n          uniqueOrders.get(order.orderId).products.push(order);\n        });\n        const filteredData = Array.from(uniqueOrders.values());\n        this.customerData = filteredData.map(customerdata => ({\n          ...customerdata,\n          orderDate: this.formatOrderDate(customerdata.orderDate)\n        }));\n        this.calculateProductTotalPrice();\n        this.calculateOrderTotalPrice();\n        this.customerData.forEach(items => {\n          items.numberOfItems = items.products.length;\n        });\n      },\n      error: error => {\n        this.toastr.error('No Orders Found', 'Error');\n      }\n    });\n  }\n  DeleteProductFromOrder() {\n    const findProdcutIndex = this.Products.findIndex(item => item.name === this.selectedProductName);\n    if (findProdcutIndex !== -1) {\n      let productId = this.Products[findProdcutIndex].productId;\n      const formData = new FormData();\n      formData.append('orderId', this.orderId);\n      formData.append('productId', productId);\n      this.homepageCustomerService.DeleteProductFromOrder(formData).subscribe({\n        next: res => {\n          if (res.includes('Deleted Succefully')) {\n            const findOrderIndex = this.customerData.findIndex(item => item.orderId === this.orderId);\n            if (findOrderIndex !== -1) {\n              const productIndex = this.customerData[findOrderIndex].products.findIndex(product => product.productId === productId);\n              if (productIndex !== -1) {\n                this.Products[findProdcutIndex].quantity += this.customerData[findOrderIndex].products[productIndex].quantitiy;\n                this.customerData[findOrderIndex].products.splice(productIndex, 1);\n                this.calculateProductTotalPrice();\n                this.calculateOrderTotalPrice();\n                const findProductLength = this.customerData[findOrderIndex].products.length;\n                if (findProductLength === 0) {\n                  this.customerData.splice(findOrderIndex, 1);\n                }\n                this.customerData.forEach(items => {\n                  items.numberOfItems = items.products.length;\n                });\n                this.toastr.success(`${this.selectedProductName} Is Deleted From The Order`, 'Success');\n                const indexToRemove = this.displayProductsToDelete.findIndex(item => item.productName === this.selectedProductName);\n                if (indexToRemove !== -1) {\n                  this.displayProductsToDelete.splice(indexToRemove, 1);\n                }\n              }\n            }\n            this.selectedProductName = '';\n          }\n        },\n        error: error => {\n          this.toastr.error(\"This Product Doesn't Exist\", 'error');\n        }\n      });\n    }\n  }\n  modifyProductToList() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (parseInt(_this.selectedQuantity) <= 0 || /[a-zA-Z]/.test(_this.selectedQuantity)) {\n        _this.toastr.warning('Invalid Quantity', 'Warning');\n        _this.productquantity.nativeElement.value = '0';\n      } else {\n        let Id = _this.Products[_this.findProdcutIndex].productId;\n        const formData = new FormData();\n        formData.append('selectedQuantity', _this.selectedQuantity);\n        formData.append('productId', Id);\n        formData.append('orderId', _this.orderId);\n        _this.homepageCustomerService.modifyProductToList(formData).subscribe({\n          next: res => {\n            if (res.includes('New Product Added To Cart')) {\n              const insertProductIndex = _this.customerData.findIndex(item => item.orderId === _this.orderId);\n              const productOrderIndex = _this.customerData[insertProductIndex].products.findIndex(item => item.productName === _this.selectedProductName);\n              if (productOrderIndex !== -1) {\n                let oldQuantity = _this.customerData[insertProductIndex].products[productOrderIndex].quantitiy;\n                let price = _this.customerData[insertProductIndex].products[productOrderIndex].price;\n                _this.customerData[insertProductIndex].products[productOrderIndex].quantitiy = _this.selectedQuantity;\n                _this.customerData[insertProductIndex].products[productOrderIndex].totalPrice = parseInt(_this.selectedQuantity) * price;\n                const findProductIndex = _this.Products.findIndex(item => item.name == _this.selectedProductName);\n                if (findProductIndex !== -1) {\n                  let newTotalQuantity = _this.Products[findProductIndex].quantity + oldQuantity - parseInt(_this.selectedQuantity);\n                  _this.setQuantityBySelect = newTotalQuantity;\n                  _this.Products[findProductIndex].quantity = _this.setQuantityBySelect;\n                  _this.toastr.success('Quantity Edited Successfully', 'Success');\n                  _this.selectedQuantity = '';\n                  _this.selectedProductName = '';\n                  _this.setQuantityBySelect = 0;\n                }\n              } else {\n                const getProduct = _this.Products.find(item => item.name === _this.selectedProductName);\n                if (getProduct) {\n                  let getOrderDate = _this.customerData[insertProductIndex].products[0].orderDate;\n                  let getProductPrice = getProduct.price;\n                  let getProductId = getProduct.productId;\n                  _this.customerData[insertProductIndex].products.push({\n                    customerId: _this.customerId,\n                    customerName: _this.customerName,\n                    orderDate: getOrderDate,\n                    orderId: _this.orderId,\n                    orderStatus: 'Pending',\n                    productId: getProductId,\n                    price: getProductPrice,\n                    productName: _this.selectedProductName,\n                    quantitiy: _this.selectedQuantity,\n                    totalPrice: parseInt(_this.selectedQuantity) * getProductPrice\n                  });\n                  _this.toastr.success(`${_this.selectedProductName} Is Added To Your Order`, 'Success');\n                  const findIndexToEditQuantityAfterAdd = _this.Products.findIndex(item => item.name === _this.selectedProductName);\n                  _this.Products[findIndexToEditQuantityAfterAdd].quantity -= parseInt(_this.selectedQuantity);\n                  _this.customerData.forEach(items => {\n                    items.numberOfItems = items.products.length;\n                  });\n                }\n              }\n              _this.selectedQuantity = '';\n              _this.selectedProductName = '';\n              _this.setQuantityBySelect = 0;\n              _this.calculateProductTotalPrice();\n              _this.calculateOrderTotalPrice();\n            }\n          },\n          error: error => {\n            _this.toastr.error(error.error, 'Error');\n            _this.selectedQuantity = '';\n            _this.selectedProductName = '';\n          }\n        });\n      }\n    })();\n  }\n  setProductQuantity() {\n    this.addToProductList = [];\n    this.findProdcutIndex = this.Products.findIndex(item => item.name === this.selectedProductName);\n    if (this.findProdcutIndex !== -1) {\n      this.setQuantityBySelect = this.Products[this.findProdcutIndex].quantity;\n      const findOrderIndex = this.customerData.findIndex(item => item.orderId === this.orderId);\n      if (findOrderIndex !== -1) {\n        const indexQuantity = this.customerData[findOrderIndex].products.findIndex(name => name.productName === this.selectedProductName);\n        if (indexQuantity !== -1) {\n          this.selectedQuantity = this.customerData[findOrderIndex].products[indexQuantity].quantitiy;\n        } else {\n          this.selectedQuantity = '';\n        }\n      }\n    } else {\n      this.selectedQuantity = '';\n    }\n    return this.findProdcutIndex;\n  }\n  productExistsInOrder(productName) {\n    const orderIndex = this.customerData.findIndex(item => item.orderId === this.orderId);\n    if (orderIndex !== -1) {\n      const order = this.customerData[orderIndex];\n      return order.products.some(product => product.productName === productName && product.categoryId !== null);\n    }\n    return false;\n  }\n  DeleteOrder(orderId) {\n    this.homepageCustomerService.deleteOrder(orderId).subscribe({\n      next: res => {\n        if (res.includes('Deleted Succefully')) {\n          this.toastr.success(' Order Deleted Successfully', 'Success');\n          const order = this.customerData.find(o => o.orderId === orderId);\n          if (order) {\n            order.products.forEach(product => {\n              const productIndex = this.Products.findIndex(p => p.productId === product.productId);\n              if (productIndex !== -1) {\n                this.Products[productIndex].quantity += product.quantitiy;\n              }\n            });\n          }\n          const index = this.customerData.findIndex(item => item.orderId === orderId);\n          if (index !== -1) {\n            this.customerData.splice(index, 1);\n            this.calculateOrderTotalPrice();\n          }\n        }\n      }\n    });\n  }\n  getAllProducts() {\n    this.addProductService.getAllProducts().subscribe({\n      next: data => {\n        this.Products = data;\n      },\n      error: error => {\n        console.log('No Products Found');\n      }\n    });\n  }\n  formatOrderDate(orderDate) {\n    const parsedDate = new Date(orderDate);\n    const formattedDate = this.datePipe.transform(parsedDate, 'MMMM d, y, h:mm a');\n    return formattedDate || '';\n  }\n  calculateProductTotalPrice() {\n    this.customerData.forEach(order => {\n      order.totalPrice = order.products.reduce((totalPrice, product) => totalPrice + product.totalPrice, 0);\n    });\n  }\n  calculateOrderTotalPrice() {\n    this.TotalPrice = this.customerData.reduce((total, item) => total + item.totalPrice, 0);\n  }\n  static #_ = this.ɵfac = function CustomerOrdersComponent_Factory(t) {\n    return new (t || CustomerOrdersComponent)(i0.ɵɵdirectiveInject(i1.headerCustomerServices), i0.ɵɵdirectiveInject(i2.DatePipe), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ToastrService), i0.ɵɵdirectiveInject(i5.NgbModal), i0.ɵɵdirectiveInject(i6.productService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CustomerOrdersComponent,\n    selectors: [[\"app-customer-orders\"]],\n    viewQuery: function CustomerOrdersComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.productquantity = _t.first);\n      }\n    },\n    decls: 80,\n    vars: 8,\n    consts: [[\"productquantity\", \"\"], [\"id\", \"wrapper\"], [\"id\", \"sidebar-wrapper\"], [\"id\", \"menu\", 1, \"sidebar-nav\", \"nav-pills\", \"nav-stacked\"], [\"routerLink\", \"/Dashboard\"], [1, \"fa-stack\", \"fa-lg\", \"pull-left\"], [1, \"fa\", \"fa-dashboard\", \"fa-stack-1x\"], [\"routerLinkActive\", \"active\"], [\"routerLink\", \"/CustomerCart\"], [1, \"fa\", \"fa-cart-plus\", \"fa-stack-1x\"], [\"routerLink\", \"/Settings-Customer\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-database\", \"fa-stack-1x\"], [\"href\", \"#\"], [1, \"fa\", \"fa-support\", \"fa-stack-1x\"], [\"routerLink\", \"/Customer-Login\"], [1, \"fa\", \"fa-sign-out\", \"fa-stack-1x\"], [\"id\", \"page-content-wrapper\"], [1, \"content-container\"], [\"class\", \"container\", 4, \"ngIf\"], [\"id\", \"editOrderModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", 1, \"modal\"], [\"role\", \"document\", 1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [1, \"modal-body\"], [1, \"align-items-center\"], [1, \"custom-select\"], [\"id\", \"modifyOrder\", \"name\", \"modifyOrder\", 1, \"form-control\", \"mr-3\", 3, \"ngModelChange\", \"ngModel\"], [1, \"d-none\"], [\"label\", \"Edit Quantity\"], [4, \"ngFor\", \"ngForOf\"], [\"label\", \"Add To Order\"], [1, \"form-group\"], [\"for\", \"quantity\", 1, \"mr-3\"], [\"type\", \"number\", \"id\", \"quantity\", \"name\", \"productName\", \"placeholder\", \"Quantity\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"id\", \"DeleteProductModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", 1, \"modal\"], [\"for\", \"deleteModal\", 1, \"mr-3\"], [\"id\", \"deleteModal1\", \"name\", \"deleteModal\", 1, \"form-control\", \"mr-3\", 3, \"ngModelChange\", \"ngModel\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"container\"], [1, \"text\", \"text-center\"], [1, \"table-responsive\"], [1, \"table\", \"table-bordered\", \"text\", \"text-center\", \"custom-table\"], [\"colspan\", \"9\"], [2, \"padding\", \"0rem 1rem\"], [\"role\", \"button\", 1, \"w-100\", \"text\", \"text-left\", \"px-3\", 3, \"click\"], [\"class\", \"table table-bordered\", 4, \"ngIf\"], [1, \"d-flex\", \"justify-content-end\", \"border-0\"], [1, \"px-2\"], [\"title\", \"Modify Order\", 1, \"btn\", \"fa\", \"fa-edit\", 3, \"click\"], [\"title\", \"Delete Product\", 1, \"btn\", \"fa\", \"fa-trash\", 3, \"click\"], [\"title\", \"Cancel Order\", 1, \"btn\", \"fa\", \"fa-remove\", 3, \"click\"], [1, \"table\", \"table-bordered\"], [4, \"ngIf\"], [3, \"value\"]],\n    template: function CustomerOrdersComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelement(0, \"app-header-customer\");\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"ul\", 3)(4, \"li\")(5, \"a\", 4)(6, \"span\", 5);\n        i0.ɵɵelement(7, \"i\", 6);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(8, \" Dashboard\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"li\", 7)(10, \"a\", 8)(11, \"span\", 5);\n        i0.ɵɵelement(12, \"i\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(13, \"Cart\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"li\")(15, \"a\", 10)(16, \"span\", 5);\n        i0.ɵɵelement(17, \"i\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(18, \"Settings\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"li\")(20, \"a\", 12)(21, \"span\", 5);\n        i0.ɵɵelement(22, \"i\", 13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(23, \"Help/Support\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"li\")(25, \"a\", 14)(26, \"span\", 5);\n        i0.ɵɵelement(27, \"i\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(28, \"Log Out\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(29, \"div\", 16)(30, \"div\", 17);\n        i0.ɵɵtemplate(31, CustomerOrdersComponent_div_31_Template, 41, 2, \"div\", 18);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(32, \"div\", 19)(33, \"div\", 20)(34, \"div\", 21)(35, \"div\", 22)(36, \"h5\", 23);\n        i0.ɵɵtext(37, \"Add Products/Edit Quantity\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(38, \"div\", 24)(39, \"form\", 25)(40, \"div\", 26)(41, \"select\", 27);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function CustomerOrdersComponent_Template_select_ngModelChange_41_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          i0.ɵɵtwoWayBindingSet(ctx.selectedProductName, $event) || (ctx.selectedProductName = $event);\n          return i0.ɵɵresetView($event);\n        });\n        i0.ɵɵlistener(\"ngModelChange\", function CustomerOrdersComponent_Template_select_ngModelChange_41_listener() {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.setProductQuantity());\n        });\n        i0.ɵɵelement(42, \"option\", 28);\n        i0.ɵɵelementStart(43, \"optgroup\", 29);\n        i0.ɵɵtemplate(44, CustomerOrdersComponent_ng_container_44_Template, 2, 1, \"ng-container\", 30);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"optgroup\", 31);\n        i0.ɵɵtemplate(46, CustomerOrdersComponent_ng_container_46_Template, 2, 1, \"ng-container\", 30);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(47, \"br\");\n        i0.ɵɵelementStart(48, \"div\", 32)(49, \"label\", 33);\n        i0.ɵɵtext(50, \"Quantity:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"input\", 34, 0);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function CustomerOrdersComponent_Template_input_ngModelChange_51_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          i0.ɵɵtwoWayBindingSet(ctx.selectedQuantity, $event) || (ctx.selectedQuantity = $event);\n          return i0.ɵɵresetView($event);\n        });\n        i0.ɵɵlistener(\"ngModelChange\", function CustomerOrdersComponent_Template_input_ngModelChange_51_listener() {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.resetQuantity(ctx.selectedQuantity));\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(53, \"br\");\n        i0.ɵɵelementStart(54, \"p\");\n        i0.ɵɵtext(55);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(56, \"div\", 35)(57, \"button\", 36);\n        i0.ɵɵlistener(\"click\", function CustomerOrdersComponent_Template_button_click_57_listener() {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.modifyProductToList());\n        });\n        i0.ɵɵtext(58, \" Save Changes \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(59, \"button\", 37);\n        i0.ɵɵlistener(\"click\", function CustomerOrdersComponent_Template_button_click_59_listener() {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.CloseModel());\n        });\n        i0.ɵɵtext(60, \" Close \");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(61, \"div\", 38)(62, \"div\", 20)(63, \"div\", 21)(64, \"div\", 22)(65, \"h5\", 23);\n        i0.ɵɵtext(66, \"Delete Product From Order\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(67, \"div\", 24)(68, \"form\", 25)(69, \"div\", 32)(70, \"label\", 39);\n        i0.ɵɵtext(71, \"Select Product To Delete:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(72, \"select\", 40);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function CustomerOrdersComponent_Template_select_ngModelChange_72_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          i0.ɵɵtwoWayBindingSet(ctx.selectedProductName, $event) || (ctx.selectedProductName = $event);\n          return i0.ɵɵresetView($event);\n        });\n        i0.ɵɵelement(73, \"option\", 28);\n        i0.ɵɵtemplate(74, CustomerOrdersComponent_option_74_Template, 2, 2, \"option\", 41);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(75, \"div\", 35)(76, \"button\", 36);\n        i0.ɵɵlistener(\"click\", function CustomerOrdersComponent_Template_button_click_76_listener() {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.DeleteProductFromOrder());\n        });\n        i0.ɵɵtext(77, \" Save Changes \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(78, \"button\", 37);\n        i0.ɵɵlistener(\"click\", function CustomerOrdersComponent_Template_button_click_78_listener() {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.CloseModel());\n        });\n        i0.ɵɵtext(79, \" Close \");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(31);\n        i0.ɵɵproperty(\"ngIf\", ctx.customerData.length > 0);\n        i0.ɵɵadvance(10);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedProductName);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.Products);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.Products);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedQuantity);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate1(\"Total Quantity Is: \", ctx.setQuantityBySelect, \"\");\n        i0.ɵɵadvance(17);\n        i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedProductName);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.displayProductsToDelete);\n      }\n    },\n    dependencies: [i2.NgForOf, i2.NgIf, i7.ɵNgNoValidate, i7.NgSelectOption, i7.ɵNgSelectMultipleOption, i7.DefaultValueAccessor, i7.NumberValueAccessor, i7.SelectControlValueAccessor, i7.NgControlStatus, i7.NgControlStatusGroup, i7.NgModel, i7.NgForm, i3.RouterLink, i3.RouterLinkActive, i8.HeaderCustomerComponent],\n    styles: [\".nav-pills[_ngcontent-%COMP%]    > li[_ngcontent-%COMP%]    > a[_ngcontent-%COMP%] {\\n  border-radius: 0;\\n}\\n\\n#wrapper[_ngcontent-%COMP%] {\\n  display: flex;\\n  overflow-x: hidden;\\n}\\n\\n.clearfix[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-evenly;\\n}\\n\\n#wrapper.toggled[_ngcontent-%COMP%] {\\n  padding-left: 250px;\\n  overflow: hidden;\\n}\\n.container-fluid[_ngcontent-%COMP%] {\\n  margin-top: 50px;\\n}\\n#sidebar-wrapper[_ngcontent-%COMP%] {\\n  z-index: 1000;\\n  position: fixed;\\n  top: 60px;\\n  bottom: 0;\\n  left: 0;\\n  width: 250px;\\n  background: #000;\\n  transition: all 0.5s ease;\\n}\\n#wrapper.toggled[_ngcontent-%COMP%]   #sidebar-wrapper[_ngcontent-%COMP%] {\\n  width: 250px;\\n}\\n\\n#page-content-wrapper[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  margin-top: 100px;\\n  margin-left: 25%;\\n}\\n\\n.xyz[_ngcontent-%COMP%] {\\n  min-width: 360px;\\n}\\n\\n#wrapper.toggled[_ngcontent-%COMP%]   #page-content-wrapper[_ngcontent-%COMP%] {\\n  position: relative;\\n  margin-right: 0px;\\n}\\n\\n.fixed-brand[_ngcontent-%COMP%] {\\n  width: auto;\\n}\\n\\n\\n\\n.sidebar-nav[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  width: 250px;\\n  height: 100vh;\\n  margin: 0;\\n  padding: 0;\\n  list-style: none;\\n  margin-top: 2px;\\n}\\n\\n.sidebar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n  text-indent: 15px;\\n  line-height: 40px;\\n}\\n\\n.sidebar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  display: block;\\n  text-decoration: none;\\n  color: #999999;\\n}\\n\\n.sidebar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n  text-decoration: none;\\n  color: #fff;\\n  background: rgba(255, 255, 255, 0.2);\\n  border-left: red 2px solid;\\n}\\n\\n.sidebar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, .sidebar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus {\\n  text-decoration: none;\\n}\\n\\n.sidebar-nav[_ngcontent-%COMP%]    > .sidebar-brand[_ngcontent-%COMP%] {\\n  height: 65px;\\n  font-size: 18px;\\n  line-height: 60px;\\n}\\n\\n.sidebar-nav[_ngcontent-%COMP%]    > .sidebar-brand[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  color: #999999;\\n}\\n\\n.sidebar-nav[_ngcontent-%COMP%]    > .sidebar-brand[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n  color: #fff;\\n  background: none;\\n}\\n\\n.no-margin[_ngcontent-%COMP%] {\\n  margin: 0;\\n}\\n.active-order[_ngcontent-%COMP%] {\\n  color: black;\\n  font-weight: bold;\\n}\\n.narrow-search[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%] {\\n  .narrow-search {\\n    margin-top: 50px;\\n    margin-left: 10px;\\n  }\\n}\\n@media (min-width: 768px) {\\n  #wrapper[_ngcontent-%COMP%] {\\n    padding-left: 250px;\\n  }\\n  .fixed-brand[_ngcontent-%COMP%] {\\n    width: 250px;\\n  }\\n  #wrapper.toggled[_ngcontent-%COMP%] {\\n    padding-left: 0;\\n  }\\n  #sidebar-wrapper[_ngcontent-%COMP%] {\\n    width: 250px;\\n  }\\n  #wrapper.toggled[_ngcontent-%COMP%]   #sidebar-wrapper[_ngcontent-%COMP%] {\\n    width: 250px;\\n  }\\n  #wrapper.toggled-2[_ngcontent-%COMP%]   #sidebar-wrapper[_ngcontent-%COMP%] {\\n    width: 50px;\\n  }\\n  #wrapper.toggled-2[_ngcontent-%COMP%]   #sidebar-wrapper[_ngcontent-%COMP%]:hover {\\n    width: 250px;\\n  }\\n  #page-content-wrapper[_ngcontent-%COMP%] {\\n    position: relative;\\n    padding: 15px;\\n    width: 65%;\\n  }\\n  #wrapper.toggled[_ngcontent-%COMP%]   #page-content-wrapper[_ngcontent-%COMP%] {\\n    position: relative;\\n    margin-right: 0;\\n    padding-left: 250px;\\n  }\\n  #wrapper.toggled-2[_ngcontent-%COMP%]   #page-content-wrapper[_ngcontent-%COMP%] {\\n    position: relative;\\n    margin-right: 0;\\n    margin-left: -200px;\\n    transition: all 0.5s ease;\\n    width: auto;\\n  }\\n  .custom-table[_ngcontent-%COMP%] {\\n    background-color: #fff;\\n    border-radius:12px;\\n    box-shadow: 12px 12px 12px rgba(0, 0, 0, 0.1);\\n  }\\n  \\n  .custom-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .custom-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%] {\\n    padding: 12px;\\n  }\\n  \\n  .custom-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%] {\\n    background-color: #f0f0f0;\\n  }\\n  \\n \\n  \\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvaGVhZGVyLWN1c3RvbWVyL2N1c3RvbWVyLW9yZGVycy9jdXN0b21lci1vcmRlcnMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsNkJBQTZCO0FBQy9COztBQUVBO0VBQ0UsbUJBQW1CO0VBQ25CLGdCQUFnQjtBQUNsQjtBQUNBO0VBQ0UsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxhQUFhO0VBQ2IsZUFBZTtFQUNmLFNBQVM7RUFDVCxTQUFTO0VBQ1QsT0FBTztFQUNQLFlBQVk7RUFDWixnQkFBZ0I7RUFDaEIseUJBQXlCO0FBQzNCO0FBQ0E7RUFDRSxZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsdUJBQXVCO0VBQ3ZCLGlCQUFpQjtFQUNqQixnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxnQkFBZ0I7QUFDbEI7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsaUJBQWlCO0FBQ25COztBQUVBO0VBQ0UsV0FBVztBQUNiO0FBQ0EsbUJBQW1COztBQUVuQjtFQUNFLGtCQUFrQjtFQUNsQixNQUFNO0VBQ04sU0FBUztFQUNULFlBQVk7RUFDWixhQUFhO0VBQ2IsU0FBUztFQUNULFVBQVU7RUFDVixnQkFBZ0I7RUFDaEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxjQUFjO0VBQ2QscUJBQXFCO0VBQ3JCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsV0FBVztFQUNYLG9DQUFvQztFQUNwQywwQkFBMEI7QUFDNUI7O0FBRUE7O0VBRUUscUJBQXFCO0FBQ3ZCOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGVBQWU7RUFDZixpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsV0FBVztFQUNYLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLFNBQVM7QUFDWDtBQUNBO0VBQ0UsWUFBWTtFQUNaLGlCQUFpQjtBQUNuQjtBQUNBO0VBQ0U7SUFDRSxnQkFBZ0I7SUFDaEIsaUJBQWlCO0VBQ25CO0FBQ0Y7QUFDQTtFQUNFO0lBQ0UsbUJBQW1CO0VBQ3JCO0VBQ0E7SUFDRSxZQUFZO0VBQ2Q7RUFDQTtJQUNFLGVBQWU7RUFDakI7RUFDQTtJQUNFLFlBQVk7RUFDZDtFQUNBO0lBQ0UsWUFBWTtFQUNkO0VBQ0E7SUFDRSxXQUFXO0VBQ2I7RUFDQTtJQUNFLFlBQVk7RUFDZDtFQUNBO0lBQ0Usa0JBQWtCO0lBQ2xCLGFBQWE7SUFDYixVQUFVO0VBQ1o7RUFDQTtJQUNFLGtCQUFrQjtJQUNsQixlQUFlO0lBQ2YsbUJBQW1CO0VBQ3JCO0VBQ0E7SUFDRSxrQkFBa0I7SUFDbEIsZUFBZTtJQUNmLG1CQUFtQjtJQUluQix5QkFBeUI7SUFDekIsV0FBVztFQUNiO0VBQ0E7SUFDRSxzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLDZDQUE2QztFQUMvQzs7RUFFQTtJQUNFLGFBQWE7RUFDZjs7RUFFQTtJQUNFLHlCQUF5QjtFQUMzQjs7OztBQUlGIiwic291cmNlc0NvbnRlbnQiOlsiLm5hdi1waWxscyA+IGxpID4gYSB7XHJcbiAgYm9yZGVyLXJhZGl1czogMDtcclxufVxyXG5cclxuI3dyYXBwZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgb3ZlcmZsb3cteDogaGlkZGVuO1xyXG59XHJcblxyXG4uY2xlYXJmaXgge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1ldmVubHk7XHJcbn1cclxuXHJcbiN3cmFwcGVyLnRvZ2dsZWQge1xyXG4gIHBhZGRpbmctbGVmdDogMjUwcHg7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxufVxyXG4uY29udGFpbmVyLWZsdWlkIHtcclxuICBtYXJnaW4tdG9wOiA1MHB4O1xyXG59XHJcbiNzaWRlYmFyLXdyYXBwZXIge1xyXG4gIHotaW5kZXg6IDEwMDA7XHJcbiAgcG9zaXRpb246IGZpeGVkO1xyXG4gIHRvcDogNjBweDtcclxuICBib3R0b206IDA7XHJcbiAgbGVmdDogMDtcclxuICB3aWR0aDogMjUwcHg7XHJcbiAgYmFja2dyb3VuZDogIzAwMDtcclxuICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlO1xyXG59XHJcbiN3cmFwcGVyLnRvZ2dsZWQgI3NpZGViYXItd3JhcHBlciB7XHJcbiAgd2lkdGg6IDI1MHB4O1xyXG59XHJcblxyXG4jcGFnZS1jb250ZW50LXdyYXBwZXIge1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgbWFyZ2luLXRvcDogMTAwcHg7XHJcbiAgbWFyZ2luLWxlZnQ6IDI1JTtcclxufVxyXG5cclxuLnh5eiB7XHJcbiAgbWluLXdpZHRoOiAzNjBweDtcclxufVxyXG5cclxuI3dyYXBwZXIudG9nZ2xlZCAjcGFnZS1jb250ZW50LXdyYXBwZXIge1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBtYXJnaW4tcmlnaHQ6IDBweDtcclxufVxyXG5cclxuLmZpeGVkLWJyYW5kIHtcclxuICB3aWR0aDogYXV0bztcclxufVxyXG4vKiBTaWRlYmFyIFN0eWxlcyAqL1xyXG5cclxuLnNpZGViYXItbmF2IHtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgdG9wOiAwO1xyXG4gIGJvdHRvbTogMDtcclxuICB3aWR0aDogMjUwcHg7XHJcbiAgaGVpZ2h0OiAxMDB2aDtcclxuICBtYXJnaW46IDA7XHJcbiAgcGFkZGluZzogMDtcclxuICBsaXN0LXN0eWxlOiBub25lO1xyXG4gIG1hcmdpbi10b3A6IDJweDtcclxufVxyXG5cclxuLnNpZGViYXItbmF2IGxpIHtcclxuICB0ZXh0LWluZGVudDogMTVweDtcclxuICBsaW5lLWhlaWdodDogNDBweDtcclxufVxyXG5cclxuLnNpZGViYXItbmF2IGxpIGEge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICBjb2xvcjogIzk5OTk5OTtcclxufVxyXG5cclxuLnNpZGViYXItbmF2IGxpIGE6aG92ZXIge1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICBjb2xvcjogI2ZmZjtcclxuICBiYWNrZ3JvdW5kOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7XHJcbiAgYm9yZGVyLWxlZnQ6IHJlZCAycHggc29saWQ7XHJcbn1cclxuXHJcbi5zaWRlYmFyLW5hdiBsaSBhOmFjdGl2ZSxcclxuLnNpZGViYXItbmF2IGxpIGE6Zm9jdXMge1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxufVxyXG5cclxuLnNpZGViYXItbmF2ID4gLnNpZGViYXItYnJhbmQge1xyXG4gIGhlaWdodDogNjVweDtcclxuICBmb250LXNpemU6IDE4cHg7XHJcbiAgbGluZS1oZWlnaHQ6IDYwcHg7XHJcbn1cclxuXHJcbi5zaWRlYmFyLW5hdiA+IC5zaWRlYmFyLWJyYW5kIGEge1xyXG4gIGNvbG9yOiAjOTk5OTk5O1xyXG59XHJcblxyXG4uc2lkZWJhci1uYXYgPiAuc2lkZWJhci1icmFuZCBhOmhvdmVyIHtcclxuICBjb2xvcjogI2ZmZjtcclxuICBiYWNrZ3JvdW5kOiBub25lO1xyXG59XHJcblxyXG4ubm8tbWFyZ2luIHtcclxuICBtYXJnaW46IDA7XHJcbn1cclxuLmFjdGl2ZS1vcmRlciB7XHJcbiAgY29sb3I6IGJsYWNrO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcbi5uYXJyb3ctc2VhcmNoIC5mb3JtLWNvbnRyb2wge1xyXG4gIC5uYXJyb3ctc2VhcmNoIHtcclxuICAgIG1hcmdpbi10b3A6IDUwcHg7XHJcbiAgICBtYXJnaW4tbGVmdDogMTBweDtcclxuICB9XHJcbn1cclxuQG1lZGlhIChtaW4td2lkdGg6IDc2OHB4KSB7XHJcbiAgI3dyYXBwZXIge1xyXG4gICAgcGFkZGluZy1sZWZ0OiAyNTBweDtcclxuICB9XHJcbiAgLmZpeGVkLWJyYW5kIHtcclxuICAgIHdpZHRoOiAyNTBweDtcclxuICB9XHJcbiAgI3dyYXBwZXIudG9nZ2xlZCB7XHJcbiAgICBwYWRkaW5nLWxlZnQ6IDA7XHJcbiAgfVxyXG4gICNzaWRlYmFyLXdyYXBwZXIge1xyXG4gICAgd2lkdGg6IDI1MHB4O1xyXG4gIH1cclxuICAjd3JhcHBlci50b2dnbGVkICNzaWRlYmFyLXdyYXBwZXIge1xyXG4gICAgd2lkdGg6IDI1MHB4O1xyXG4gIH1cclxuICAjd3JhcHBlci50b2dnbGVkLTIgI3NpZGViYXItd3JhcHBlciB7XHJcbiAgICB3aWR0aDogNTBweDtcclxuICB9XHJcbiAgI3dyYXBwZXIudG9nZ2xlZC0yICNzaWRlYmFyLXdyYXBwZXI6aG92ZXIge1xyXG4gICAgd2lkdGg6IDI1MHB4O1xyXG4gIH1cclxuICAjcGFnZS1jb250ZW50LXdyYXBwZXIge1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgcGFkZGluZzogMTVweDtcclxuICAgIHdpZHRoOiA2NSU7XHJcbiAgfVxyXG4gICN3cmFwcGVyLnRvZ2dsZWQgI3BhZ2UtY29udGVudC13cmFwcGVyIHtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIG1hcmdpbi1yaWdodDogMDtcclxuICAgIHBhZGRpbmctbGVmdDogMjUwcHg7XHJcbiAgfVxyXG4gICN3cmFwcGVyLnRvZ2dsZWQtMiAjcGFnZS1jb250ZW50LXdyYXBwZXIge1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAwO1xyXG4gICAgbWFyZ2luLWxlZnQ6IC0yMDBweDtcclxuICAgIC13ZWJraXQtdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZTtcclxuICAgIC1tb3otdHJhbnNpdGlvbjogYWxsIDAuNXMgZWFzZTtcclxuICAgIC1vLXRyYW5zaXRpb246IGFsbCAwLjVzIGVhc2U7XHJcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC41cyBlYXNlO1xyXG4gICAgd2lkdGg6IGF1dG87XHJcbiAgfVxyXG4gIC5jdXN0b20tdGFibGUge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICAgIGJvcmRlci1yYWRpdXM6MTJweDtcclxuICAgIGJveC1zaGFkb3c6IDEycHggMTJweCAxMnB4IHJnYmEoMCwgMCwgMCwgMC4xKTtcclxuICB9XHJcbiAgXHJcbiAgLmN1c3RvbS10YWJsZSB0aCwgLmN1c3RvbS10YWJsZSB0ZCB7XHJcbiAgICBwYWRkaW5nOiAxMnB4O1xyXG4gIH1cclxuICBcclxuICAuY3VzdG9tLXRhYmxlIHRoZWFkIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmMGYwZjA7XHJcbiAgfVxyXG4gIFxyXG4gXHJcbiAgXHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["jwtDecode","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","product_r5","productName","quantitiy","ɵɵtextInterpolate1","totalPrice","ɵɵtemplate","CustomerOrdersComponent_div_31_tr_38_table_4_tr_10_Template","ɵɵproperty","order_r3","products","ɵɵlistener","CustomerOrdersComponent_div_31_tr_38_Template_p_click_2_listener","ɵɵrestoreView","_r2","$implicit","ctx_r3","ɵɵnextContext","ɵɵresetView","toggleOrderDetails","CustomerOrdersComponent_div_31_tr_38_table_4_Template","CustomerOrdersComponent_div_31_tr_38_Template_button_click_19_listener","openEditOrderModal","orderId","CustomerOrdersComponent_div_31_tr_38_Template_button_click_21_listener","DeleteProduct","CustomerOrdersComponent_div_31_tr_38_Template_button_click_23_listener","DeleteOrder","ɵɵclassProp","activeOrderId","showDetails","numberOfItems","orderDate","city","address","orderStatus","ɵɵelement","CustomerOrdersComponent_div_31_tr_38_Template","customerData","TotalPrice","ɵɵelementContainerStart","product_r6","name","CustomerOrdersComponent_ng_container_44_ng_container_1_Template","productExistsInOrder","product_r7","CustomerOrdersComponent_ng_container_46_ng_container_1_Template","product_r8","CustomerOrdersComponent","constructor","homepageCustomerService","datePipe","route","router","toastr","modalService","addProductService","Products","setQuantityBySelect","addToProductList","displayProductsToDelete","ngOnInit","getAllProducts","getUserOrder","token","localStorage","getItem","decodedToken","customerId","customerName","order","getOrdersById","subscribe","next","res","length","error","resetQuantity","quantity","parseInt","warning","productquantity","nativeElement","value","selectedQuantity","selectedProductName","$","modal","findIndex","item","forEach","push","CloseModel","getCustomerOrderList","data","uniqueOrders","Map","has","set","get","filteredData","Array","from","values","map","customerdata","formatOrderDate","calculateProductTotalPrice","calculateOrderTotalPrice","items","DeleteProductFromOrder","findProdcutIndex","productId","formData","FormData","append","includes","findOrderIndex","productIndex","product","splice","findProductLength","success","indexToRemove","modifyProductToList","_this","_asyncToGenerator","test","Id","insertProductIndex","productOrderIndex","oldQuantity","price","findProductIndex","newTotalQuantity","getProduct","find","getOrderDate","getProductPrice","getProductId","findIndexToEditQuantityAfterAdd","setProductQuantity","indexQuantity","orderIndex","some","categoryId","deleteOrder","o","p","index","console","log","parsedDate","Date","formattedDate","transform","reduce","total","_","ɵɵdirectiveInject","i1","headerCustomerServices","i2","DatePipe","i3","ActivatedRoute","Router","i4","ToastrService","i5","NgbModal","i6","productService","_2","selectors","viewQuery","CustomerOrdersComponent_Query","rf","ctx","CustomerOrdersComponent_div_31_Template","ɵɵtwoWayListener","CustomerOrdersComponent_Template_select_ngModelChange_41_listener","$event","_r1","ɵɵtwoWayBindingSet","CustomerOrdersComponent_ng_container_44_Template","CustomerOrdersComponent_ng_container_46_Template","CustomerOrdersComponent_Template_input_ngModelChange_51_listener","CustomerOrdersComponent_Template_button_click_57_listener","CustomerOrdersComponent_Template_button_click_59_listener","CustomerOrdersComponent_Template_select_ngModelChange_72_listener","CustomerOrdersComponent_option_74_Template","CustomerOrdersComponent_Template_button_click_76_listener","CustomerOrdersComponent_Template_button_click_78_listener","ɵɵtwoWayProperty"],"sources":["D:\\Angular\\CenterApp\\src\\app\\header-customer\\customer-orders\\customer-orders.component.ts","D:\\Angular\\CenterApp\\src\\app\\header-customer\\customer-orders\\customer-orders.component.html"],"sourcesContent":["import {\r\n  AfterViewChecked,\r\n  Component,\r\n  ElementRef,\r\n  OnInit,\r\n  ViewChild,\r\n} from '@angular/core';\r\nimport { headerCustomerServices } from '../header-customer.service';\r\nimport { DatePipe } from '@angular/common';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { productService } from 'src/app/homepage/products/products.service';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport { find } from 'rxjs';\r\ndeclare var $: any;\r\n\r\n@Component({\r\n  selector: 'app-customer-orders',\r\n  templateUrl: './customer-orders.component.html',\r\n  styleUrl: './customer-orders.component.css',\r\n})\r\nexport class CustomerOrdersComponent implements OnInit {\r\n  selectedOrderProducts!: any[];\r\n  TotalPrice!: number;\r\n  customerData: any[] = [];\r\n  Products: any[] = [];\r\n  activeOrderId: number | null = null;\r\n  selectedProductName!: string;\r\n  selectedQuantity!: string;\r\n  customerId!: string;\r\n  token!: string;\r\n  decodedToken!: any;\r\n  customerName!: string;\r\n  orderId!: string;\r\n  findProdcutIndex!: number; // This is for setProductQuantity() Method\r\n  addProducts!: any[];\r\n  setQuantityBySelect: number = 0;\r\n  addToProductList: any[] = [];\r\n  numberOfItems!: number;\r\n  displayProductsToDelete: any = [];\r\n\r\n  @ViewChild('productquantity', { static: true })\r\n  productquantity!: ElementRef<HTMLInputElement>;\r\n  constructor(\r\n    private homepageCustomerService: headerCustomerServices,\r\n    private datePipe: DatePipe,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private toastr: ToastrService,\r\n    private modalService: NgbModal,\r\n    private addProductService: productService\r\n  ) {}\r\n  ngOnInit(): void {\r\n    this.getAllProducts();\r\n    this.getUserOrder();\r\n    this.token =\r\n      localStorage.getItem('token') ||\r\n      'Looks Like there is an error with authintication';\r\n    this.decodedToken = jwtDecode(this.token);\r\n    this.customerId =\r\n      this.decodedToken[\r\n        'http://schemas.xmlsoap.org/ws/2005/05/identity/claims/CustomerId'\r\n      ];\r\n    this.customerName =\r\n      this.decodedToken[\r\n        'http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name'\r\n      ];\r\n  }\r\n\r\n  toggleOrderDetails(order: any): void {\r\n    this.homepageCustomerService.getOrdersById(order.orderId).subscribe({\r\n      next: (res) => {\r\n        if (res.length !== 0) {\r\n          this.activeOrderId = order.orderId;\r\n          order.showDetails = !order.showDetails;\r\n        }\r\n      },\r\n      error: (error) => {\r\n        this.toastr.error('No Orders Found', 'error');\r\n      },\r\n    });\r\n  }\r\n\r\n  resetQuantity(quantity: string) {\r\n    if (parseInt(quantity) < 0) {\r\n      this.toastr.warning('Invalid Quantity', 'Warning');\r\n      this.productquantity.nativeElement.value = '0';\r\n    }\r\n  }\r\n  openEditOrderModal(orderId: string) {\r\n    this.orderId = orderId;\r\n    this.selectedQuantity = '';\r\n    this.selectedProductName = '';\r\n    this.setQuantityBySelect = 0;\r\n    $('#editOrderModal').modal('show');\r\n  }\r\n  DeleteProduct(orderId: string) {\r\n    this.orderId = orderId;\r\n    this.selectedQuantity = '';\r\n    this.selectedProductName = '';\r\n    this.setQuantityBySelect = 0;\r\n    this.displayProductsToDelete = [];\r\n    const findIndex = this.customerData.findIndex(\r\n      (item) => item.orderId === this.orderId\r\n    );\r\n    if (findIndex !== -1) {\r\n      this.customerData[findIndex].products.forEach((order: any) => {\r\n        this.displayProductsToDelete.push({\r\n          productName: order.productName,\r\n        });\r\n      });\r\n    }\r\n    $('#DeleteProductModal').modal('show');\r\n  }\r\n  CloseModel() {\r\n    this.orderId = '';\r\n    this.selectedQuantity = '';\r\n    this.selectedProductName = '';\r\n    this.setQuantityBySelect = 0;\r\n  }\r\n  getUserOrder(): void {\r\n    this.homepageCustomerService.getCustomerOrderList().subscribe({\r\n      next: (data: any[]) => {\r\n        const uniqueOrders = new Map();\r\n\r\n        data.forEach((order) => {\r\n          if (!uniqueOrders.has(order.orderId)) {\r\n            uniqueOrders.set(order.orderId, { ...order, products: [] });\r\n          }\r\n          uniqueOrders.get(order.orderId).products.push(order);\r\n        });\r\n\r\n        const filteredData = Array.from(uniqueOrders.values());\r\n        this.customerData = filteredData.map((customerdata) => ({\r\n          ...customerdata,\r\n          orderDate: this.formatOrderDate(customerdata.orderDate),\r\n        }));\r\n        this.calculateProductTotalPrice();\r\n        this.calculateOrderTotalPrice();\r\n        this.customerData.forEach((items) => {\r\n          items.numberOfItems = items.products.length;\r\n        });\r\n      },\r\n      error: (error) => {\r\n        this.toastr.error('No Orders Found', 'Error');\r\n      },\r\n    });\r\n  }\r\n  DeleteProductFromOrder() {\r\n    const findProdcutIndex = this.Products.findIndex(\r\n      (item) => item.name === this.selectedProductName\r\n    );\r\n    if (findProdcutIndex !== -1) {\r\n      let productId = this.Products[findProdcutIndex].productId;\r\n      const formData = new FormData();\r\n      formData.append('orderId', this.orderId);\r\n      formData.append('productId', productId);\r\n      this.homepageCustomerService.DeleteProductFromOrder(formData).subscribe({\r\n        next: (res) => {\r\n          if (res.includes('Deleted Succefully')) {\r\n            const findOrderIndex = this.customerData.findIndex(\r\n              (item) => item.orderId === this.orderId\r\n            );\r\n            if (findOrderIndex !== -1) {\r\n              const productIndex = this.customerData[\r\n                findOrderIndex\r\n              ].products.findIndex(\r\n                (product: any) => product.productId === productId\r\n              );\r\n              if (productIndex !== -1) {\r\n                this.Products[findProdcutIndex].quantity +=\r\n                  this.customerData[findOrderIndex].products[\r\n                    productIndex\r\n                  ].quantitiy;\r\n\r\n                this.customerData[findOrderIndex].products.splice(\r\n                  productIndex,\r\n                  1\r\n                );\r\n                this.calculateProductTotalPrice();\r\n                this.calculateOrderTotalPrice();\r\n                const findProductLength =\r\n                  this.customerData[findOrderIndex].products.length;\r\n                if (findProductLength === 0) {\r\n                  this.customerData.splice(findOrderIndex, 1);\r\n                }\r\n                this.customerData.forEach((items) => {\r\n                  items.numberOfItems = items.products.length;\r\n                });\r\n                this.toastr.success(\r\n                  `${this.selectedProductName} Is Deleted From The Order`,\r\n                  'Success'\r\n                );\r\n                const indexToRemove = this.displayProductsToDelete.findIndex(\r\n                  (item: any) => item.productName === this.selectedProductName\r\n                );\r\n                if (indexToRemove !== -1) {\r\n                  this.displayProductsToDelete.splice(indexToRemove, 1);\r\n                }\r\n              }\r\n            }\r\n            this.selectedProductName = '';\r\n          }\r\n        },\r\n        error: (error) => {\r\n          this.toastr.error(\"This Product Doesn't Exist\", 'error');\r\n        },\r\n      });\r\n    }\r\n  }\r\n  public async modifyProductToList() {\r\n    if (\r\n      parseInt(this.selectedQuantity) <= 0 ||\r\n      /[a-zA-Z]/.test(this.selectedQuantity)\r\n    ) {\r\n      this.toastr.warning('Invalid Quantity', 'Warning');\r\n      this.productquantity.nativeElement.value = '0';\r\n    } else {\r\n      let Id = this.Products[this.findProdcutIndex].productId;\r\n      const formData = new FormData();\r\n      formData.append('selectedQuantity', this.selectedQuantity);\r\n      formData.append('productId', Id);\r\n      formData.append('orderId', this.orderId);\r\n      this.homepageCustomerService.modifyProductToList(formData).subscribe({\r\n        next: (res) => {\r\n          if (res.includes('New Product Added To Cart')) {\r\n            const insertProductIndex = this.customerData.findIndex(\r\n              (item) => item.orderId === this.orderId\r\n            );\r\n            const productOrderIndex = this.customerData[\r\n              insertProductIndex\r\n            ].products.findIndex(\r\n              (item: any) => item.productName === this.selectedProductName\r\n            );\r\n\r\n            if (productOrderIndex !== -1) {\r\n              let oldQuantity =\r\n                this.customerData[insertProductIndex].products[\r\n                  productOrderIndex\r\n                ].quantitiy;\r\n              let price =\r\n                this.customerData[insertProductIndex].products[\r\n                  productOrderIndex\r\n                ].price;\r\n              this.customerData[insertProductIndex].products[\r\n                productOrderIndex\r\n              ].quantitiy = this.selectedQuantity;\r\n              this.customerData[insertProductIndex].products[\r\n                productOrderIndex\r\n              ].totalPrice = parseInt(this.selectedQuantity) * price;\r\n              const findProductIndex = this.Products.findIndex(\r\n                (item) => item.name == this.selectedProductName\r\n              );\r\n              if (findProductIndex !== -1) {\r\n                let newTotalQuantity =\r\n                  this.Products[findProductIndex].quantity +\r\n                  oldQuantity -\r\n                  parseInt(this.selectedQuantity);\r\n                this.setQuantityBySelect = newTotalQuantity;\r\n                this.Products[findProductIndex].quantity =\r\n                  this.setQuantityBySelect;\r\n\r\n                this.toastr.success('Quantity Edited Successfully', 'Success');\r\n                this.selectedQuantity = '';\r\n                this.selectedProductName = '';\r\n                this.setQuantityBySelect = 0;\r\n              }\r\n            } else {\r\n              const getProduct = this.Products.find(\r\n                (item) => item.name === this.selectedProductName\r\n              );\r\n              if (getProduct) {\r\n                let getOrderDate =\r\n                  this.customerData[insertProductIndex].products[0].orderDate;\r\n                let getProductPrice = getProduct.price;\r\n                let getProductId = getProduct.productId;\r\n                this.customerData[insertProductIndex].products.push({\r\n                  customerId: this.customerId,\r\n                  customerName: this.customerName,\r\n                  orderDate: getOrderDate,\r\n                  orderId: this.orderId,\r\n                  orderStatus: 'Pending',\r\n                  productId: getProductId,\r\n                  price: getProductPrice,\r\n                  productName: this.selectedProductName,\r\n                  quantitiy: this.selectedQuantity,\r\n                  totalPrice: parseInt(this.selectedQuantity) * getProductPrice,\r\n                });\r\n                this.toastr.success(\r\n                  `${this.selectedProductName} Is Added To Your Order`,\r\n                  'Success'\r\n                );\r\n                const findIndexToEditQuantityAfterAdd = this.Products.findIndex(\r\n                  (item) => item.name === this.selectedProductName\r\n                );\r\n                this.Products[findIndexToEditQuantityAfterAdd].quantity -=\r\n                  parseInt(this.selectedQuantity);\r\n                this.customerData.forEach((items) => {\r\n                  items.numberOfItems = items.products.length;\r\n                });\r\n              }\r\n            }\r\n            this.selectedQuantity = '';\r\n            this.selectedProductName = '';\r\n            this.setQuantityBySelect = 0;\r\n            this.calculateProductTotalPrice();\r\n            this.calculateOrderTotalPrice();\r\n          }\r\n        },\r\n\r\n        error: (error) => {\r\n          this.toastr.error(error.error, 'Error');\r\n          this.selectedQuantity = '';\r\n          this.selectedProductName = '';\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  setProductQuantity(): number {\r\n    this.addToProductList = [];\r\n    this.findProdcutIndex = this.Products.findIndex(\r\n      (item) => item.name === this.selectedProductName\r\n    );\r\n    if (this.findProdcutIndex !== -1) {\r\n      this.setQuantityBySelect = this.Products[this.findProdcutIndex].quantity;\r\n      const findOrderIndex = this.customerData.findIndex(\r\n        (item) => item.orderId === this.orderId\r\n      );\r\n\r\n      if (findOrderIndex !== -1) {\r\n        const indexQuantity = this.customerData[\r\n          findOrderIndex\r\n        ].products.findIndex(\r\n          (name: any) => name.productName === this.selectedProductName\r\n        );\r\n\r\n        if (indexQuantity !== -1) {\r\n          this.selectedQuantity =\r\n            this.customerData[findOrderIndex].products[indexQuantity].quantitiy;\r\n        } else {\r\n          this.selectedQuantity = '';\r\n        }\r\n      }\r\n    } else {\r\n      this.selectedQuantity = '';\r\n    }\r\n    return this.findProdcutIndex;\r\n  }\r\n  productExistsInOrder(productName: string): boolean {\r\n    const orderIndex = this.customerData.findIndex(\r\n      (item) => item.orderId === this.orderId\r\n    );\r\n    if (orderIndex !== -1) {\r\n      const order = this.customerData[orderIndex];\r\n      return order.products.some(\r\n        (product: any) =>\r\n          product.productName === productName && product.categoryId !== null\r\n      );\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  DeleteOrder(orderId: number) {\r\n    this.homepageCustomerService.deleteOrder(orderId).subscribe({\r\n      next: (res) => {\r\n        if (res.includes('Deleted Succefully')) {\r\n          this.toastr.success(' Order Deleted Successfully', 'Success');\r\n          const order = this.customerData.find((o) => o.orderId === orderId);\r\n          if (order) {\r\n            order.products.forEach((product: any) => {\r\n              const productIndex = this.Products.findIndex(\r\n                (p) => p.productId === product.productId\r\n              );\r\n              if (productIndex !== -1) {\r\n                this.Products[productIndex].quantity += product.quantitiy;\r\n              }\r\n            });\r\n          }\r\n          const index = this.customerData.findIndex(\r\n            (item) => item.orderId === orderId\r\n          );\r\n          if (index !== -1) {\r\n            this.customerData.splice(index, 1);\r\n            this.calculateOrderTotalPrice();\r\n          }\r\n        }\r\n      },\r\n    });\r\n  }\r\n  getAllProducts(): void {\r\n    this.addProductService.getAllProducts().subscribe({\r\n      next: (data: any[]) => {\r\n        this.Products = data;\r\n      },\r\n      error: (error) => {\r\n        console.log('No Products Found');\r\n      },\r\n    });\r\n  }\r\n  formatOrderDate(orderDate: string): string {\r\n    const parsedDate = new Date(orderDate);\r\n    const formattedDate = this.datePipe.transform(\r\n      parsedDate,\r\n      'MMMM d, y, h:mm a'\r\n    );\r\n    return formattedDate || '';\r\n  }\r\n  calculateProductTotalPrice() {\r\n    this.customerData.forEach((order) => {\r\n      order.totalPrice = order.products.reduce(\r\n        (totalPrice: number, product: any) => totalPrice + product.totalPrice,\r\n        0\r\n      );\r\n    });\r\n  }\r\n  calculateOrderTotalPrice() {\r\n    this.TotalPrice = this.customerData.reduce(\r\n      (total: number, item: { totalPrice: number }) => total + item.totalPrice,\r\n      0\r\n    );\r\n  }\r\n}\r\n","<app-header-customer></app-header-customer>\r\n<div id=\"wrapper\">\r\n  <div id=\"sidebar-wrapper\">\r\n    <ul class=\"sidebar-nav nav-pills nav-stacked\" id=\"menu\">\r\n      <li>\r\n        <a routerLink=\"/Dashboard\"\r\n          ><span class=\"fa-stack fa-lg pull-left\"\r\n            ><i class=\"fa fa-dashboard fa-stack-1x\"></i\r\n          ></span>\r\n          Dashboard</a\r\n        >\r\n      </li>\r\n      <li routerLinkActive=\"active\">\r\n        <a routerLink=\"/CustomerCart\"\r\n          ><span class=\"fa-stack fa-lg pull-left\">\r\n            <i class=\"fa fa-cart-plus fa-stack-1x\"></i> </span\r\n          >Cart</a\r\n        >\r\n      </li>\r\n      <li>\r\n        <a routerLink=\"/Settings-Customer\">\r\n          <span class=\"fa-stack fa-lg pull-left\">\r\n            <i class=\"fa fa-database fa-stack-1x\" aria-hidden=\"true\"></i> </span\r\n          >Settings</a\r\n        >\r\n      </li>\r\n      <li>\r\n        <a href=\"#\"\r\n          ><span class=\"fa-stack fa-lg pull-left\"\r\n            ><i class=\"fa fa-support fa-stack-1x\"></i></span\r\n          >Help/Support</a\r\n        >\r\n      </li>\r\n      <li>\r\n        <a routerLink=\"/Customer-Login\"\r\n          ><span class=\"fa-stack fa-lg pull-left\"\r\n            ><i class=\"fa fa-sign-out fa-stack-1x\"></i></span\r\n          >Log Out</a\r\n        >\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</div>\r\n<div id=\"page-content-wrapper\">\r\n  <div class=\"content-container\">\r\n    <div class=\"container\" *ngIf=\"customerData.length > 0\">\r\n      <h4 class=\"text text-center\">Orders List</h4>\r\n      <br />\r\n      <div class=\"table-responsive\">\r\n        <table class=\"table table-bordered text text-center custom-table\">\r\n          <thead>\r\n            <tr>\r\n              <td colspan=\"9\"><b>Orders Details</b></td>\r\n            </tr>\r\n            <tr>\r\n              <td><b>Order ID</b></td>\r\n              <!-- <td><b>Customer Name</b></td> -->\r\n              <td><b># Of Items</b></td>\r\n              <td><b>Order Total Price</b></td>\r\n              <td><b>Order Date</b></td>\r\n              <td><b>City</b></td>\r\n              <td><b>Address</b></td>\r\n              <td><b>Status</b></td>\r\n              <td>\r\n                <b> <u>Modify Order</u></b>\r\n              </td>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr *ngFor=\"let order of customerData\">\r\n              <td>\r\n                <p\r\n                  class=\"w-100 text text-left px-3\"\r\n                  role=\"button\"\r\n                  [class.active-order]=\"\r\n                    order.orderId === activeOrderId && order.showDetails\r\n                  \"\r\n                  (click)=\"toggleOrderDetails(order)\"\r\n                >\r\n                  {{ order.orderId }}\r\n                </p>\r\n                <table class=\"table table-bordered\" *ngIf=\"order.showDetails\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th class=\"text text-center\">Product Name</th>\r\n                      <th class=\"text text-center\">Quantity</th>\r\n                      <th class=\"text text-center\">Total Price</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr *ngFor=\"let product of order.products\">\r\n                      <td>{{ product.productName }}</td>\r\n                      <td>{{ product.quantitiy }}</td>\r\n                      <td>{{ product.totalPrice }}$</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </td>\r\n              <!-- <td>{{ customerName }}</td> -->\r\n              <td>{{ order.numberOfItems }}</td>\r\n              <td>{{ order.totalPrice }}$</td>\r\n              <td>{{ order.orderDate }}</td>\r\n              <td>{{ order.city }}</td>\r\n              <td>{{ order.address }}</td>\r\n              <td>{{ order.orderStatus }}</td>\r\n              <td class=\"d-flex justify-content-end border-0\">\r\n                <div class=\"px-2\">\r\n                  <button\r\n                    class=\"btn fa fa-edit\"\r\n                    title=\"Modify Order\"\r\n                    (click)=\"openEditOrderModal(order.orderId)\"\r\n                  ></button>\r\n                </div>\r\n                <div class=\"px-2\">\r\n                  <button\r\n                    class=\"btn fa fa-trash\"\r\n                    title=\"Delete Product\"\r\n                    (click)=\"DeleteProduct(order.orderId)\"\r\n                  ></button>\r\n                </div>\r\n                <div class=\"px-2\">\r\n                  <button\r\n                    class=\"btn fa fa-remove\"\r\n                    title=\"Cancel Order\"\r\n                    (click)=\"DeleteOrder(order.orderId)\"\r\n                  ></button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <h3 style=\"padding: 0rem 1rem\">\r\n          Orders Total Price: {{ TotalPrice }}$\r\n        </h3>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"modal\" id=\"editOrderModal\" tabindex=\"-1\" role=\"dialog\">\r\n  <div class=\"modal-dialog\" role=\"document\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\">Add Products/Edit Quantity</h5>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <form class=\"align-items-center\">\r\n          <div class=\"custom-select\">\r\n            <select\r\n              id=\"modifyOrder\"\r\n              class=\"form-control mr-3\"\r\n              name=\"modifyOrder\"\r\n              [(ngModel)]=\"selectedProductName\"\r\n              (ngModelChange)=\"setProductQuantity()\"\r\n            >\r\n            <option class=\"d-none\"></option>\r\n            <optgroup label=\"Edit Quantity\">\r\n              <ng-container *ngFor=\"let product of Products\">\r\n                <ng-container *ngIf=\"productExistsInOrder(product.name)\">\r\n                  <option [value]=\"product.name\">\r\n                    {{ product.name }}\r\n                  </option>\r\n                </ng-container>\r\n              </ng-container>\r\n            </optgroup>\r\n              <optgroup label=\"Add To Order\">\r\n              <ng-container *ngFor=\"let product of Products\">\r\n                <ng-container *ngIf=\"!productExistsInOrder(product.name)\">\r\n                  <option [value]=\"product.name\">\r\n                    {{ product.name }} \r\n                  </option>\r\n                </ng-container>\r\n              </ng-container>\r\n            </optgroup>\r\n\r\n            </select>\r\n          </div>\r\n          <br />\r\n          <div class=\"form-group\">\r\n            <label for=\"quantity\" class=\"mr-3\">Quantity:</label>\r\n            <input\r\n              type=\"number\"\r\n              id=\"quantity\"\r\n              class=\"form-control\"\r\n              [(ngModel)]=\"selectedQuantity\"\r\n              (ngModelChange)=\"resetQuantity(selectedQuantity)\"\r\n              name=\"productName\"\r\n              placeholder=\"Quantity\"\r\n              #productquantity\r\n            />\r\n            <br />\r\n            <p>Total Quantity Is: {{ setQuantityBySelect }}</p>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div class=\"modal-footer\">\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn btn-primary\"\r\n          (click)=\"modifyProductToList()\"\r\n        >\r\n          Save Changes\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" (click)=\"CloseModel()\">\r\n          Close\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"modal\" id=\"DeleteProductModal\" tabindex=\"-1\" role=\"dialog\">\r\n  <div class=\"modal-dialog\" role=\"document\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\">Delete Product From Order</h5>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        <form class=\"align-items-center\">\r\n          <div class=\"form-group\">\r\n            <label for=\"deleteModal\" class=\"mr-3\"\r\n              >Select Product To Delete:</label\r\n            >\r\n            <select\r\n              id=\"deleteModal1\"\r\n              class=\"form-control mr-3\"\r\n              name=\"deleteModal\"\r\n              [(ngModel)]=\"selectedProductName\"\r\n            >\r\n            <option class=\"d-none\"></option>\r\n              <option\r\n                *ngFor=\"let product of displayProductsToDelete\"\r\n                [value]=\"product.productName\"\r\n              >\r\n                {{ product.productName }}\r\n              </option>\r\n            </select>\r\n          </div>\r\n        </form>\r\n      </div>\r\n\r\n      <div class=\"modal-footer\">\r\n        <button\r\n          type=\"button\"\r\n          class=\"btn btn-primary\"\r\n          (click)=\"DeleteProductFromOrder()\"\r\n        >\r\n          Save Changes\r\n        </button>\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\" (click)=\"CloseModel()\">\r\n          Close\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}