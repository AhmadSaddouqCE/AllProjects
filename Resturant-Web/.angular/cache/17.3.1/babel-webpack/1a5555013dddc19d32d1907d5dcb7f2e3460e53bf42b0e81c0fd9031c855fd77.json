{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-toastr\";\nimport * as i2 from \"./Shopping.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/homepage/products/products.service\";\nimport * as i5 from \"../header-customer.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"../header-customer.component\";\nconst _c0 = [\"productquantity\"];\nfunction ShoppingCartComponent_div_29_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 42)(2, \"div\", 43)(3, \"a\", 44);\n    i0.ɵɵelement(4, \"img\", 45);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(5, \"td\", 46)(6, \"strong\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\", 47)(9, \"strong\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"td\", 48)(12, \"strong\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"td\", 48)(15, \"strong\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"td\", 49)(18, \"button\", 50);\n    i0.ɵɵlistener(\"click\", function ShoppingCartComponent_div_29_tr_18_Template_button_click_18_listener() {\n      const carts_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.deleteFromCart(carts_r4.cartid, carts_r4.productName));\n    });\n    i0.ɵɵelement(19, \"span\", 51);\n    i0.ɵɵtext(20, \" Remove \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"td\", 49)(22, \"button\", 52);\n    i0.ɵɵlistener(\"click\", function ShoppingCartComponent_div_29_tr_18_Template_button_click_22_listener() {\n      const carts_r4 = i0.ɵɵrestoreView(_r3).$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.setCartId_Quantity(carts_r4.cartid, carts_r4.quantity));\n    });\n    i0.ɵɵelement(23, \"span\", 53);\n    i0.ɵɵtext(24, \" Edit \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const carts_r4 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", carts_r4.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(carts_r4.productName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(carts_r4.quantity);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", carts_r4.price, \"$\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", carts_r4.totalPrice, \"$\");\n  }\n}\nfunction ShoppingCartComponent_div_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 31)(1, \"div\", 32)(2, \"div\", 33)(3, \"table\", 34)(4, \"thead\")(5, \"tr\")(6, \"th\");\n    i0.ɵɵtext(7, \"Product Image\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\", 35);\n    i0.ɵɵtext(9, \"Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 35);\n    i0.ɵɵtext(11, \"Quantity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 35);\n    i0.ɵɵtext(13, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\", 35);\n    i0.ɵɵtext(15, \"Total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"th\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"tbody\");\n    i0.ɵɵtemplate(18, ShoppingCartComponent_div_29_tr_18_Template, 25, 5, \"tr\", 36);\n    i0.ɵɵelementStart(19, \"tr\");\n    i0.ɵɵelement(20, \"td\")(21, \"td\")(22, \"td\");\n    i0.ɵɵelementStart(23, \"td\")(24, \"h3\");\n    i0.ɵɵtext(25, \"Total\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"td\", 37)(27, \"h3\")(28, \"strong\");\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(30, \"tr\");\n    i0.ɵɵelement(31, \"td\")(32, \"td\")(33, \"td\");\n    i0.ɵɵelementStart(34, \"td\")(35, \"button\", 38);\n    i0.ɵɵelement(36, \"span\", 39);\n    i0.ɵɵtext(37, \" Continue Shopping \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(38, \"td\")(39, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function ShoppingCartComponent_div_29_Template_button_click_39_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.addOrder());\n    });\n    i0.ɵɵtext(40, \" Checkout \");\n    i0.ɵɵelement(41, \"span\", 41);\n    i0.ɵɵelementEnd()()()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.CartItems);\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r4.TotalPrice, \"$\");\n  }\n}\nfunction ShoppingCartComponent_ng_template_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 54)(1, \"p\");\n    i0.ɵɵtext(2, \"Your cart is empty.\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport class ShoppingCartComponent {\n  constructor(toastr, shoppingService, router, currentRoute, addProductService, homepageCustomerService) {\n    this.toastr = toastr;\n    this.shoppingService = shoppingService;\n    this.router = router;\n    this.currentRoute = currentRoute;\n    this.addProductService = addProductService;\n    this.homepageCustomerService = homepageCustomerService;\n    this.CartItems = [];\n    this.sendCart = [];\n    this.Products = [];\n  }\n  ngAfterViewChecked() {\n    this.homepageCustomerService.setCartLength(this.CartItems.length);\n  }\n  ngOnInit() {\n    this.getCustomerCart();\n  }\n  setCartId_Quantity(cartid, quantity) {\n    this.productquantity.nativeElement.valueAsNumber = quantity;\n    this.selectedCartId = cartid;\n  }\n  resetQuantity(quantity) {\n    if (parseInt(quantity) < 0) {\n      this.toastr.warning('Invalid Quantity', 'Warning');\n      this.productquantity.nativeElement.value = '0';\n    }\n  }\n  getAllProducts() {\n    this.addProductService.getAllProducts().subscribe({\n      next: data => {\n        this.Products = data;\n      },\n      error: error => {\n        this.toastr.error('Error Fetching  products', 'Error');\n      }\n    });\n  }\n  addOrder() {\n    this.shoppingService.addOrder().subscribe({\n      next: res => {\n        if (res.includes('Order Added Succefully')) {\n          this.toastr.success('Order Added Succefully', 'Success');\n          this.CartItems = [];\n        }\n      },\n      error: error => {\n        this.toastr.warning(error.error, 'Warning');\n      }\n    });\n  }\n  editQuantity() {\n    if (this.selectedCartId !== undefined) {\n      const quantity = this.productquantity.nativeElement?.value;\n      const form = new FormData();\n      let cartIdToString = this.selectedCartId.toString();\n      let quantityToString = quantity;\n      form.append('cartId', cartIdToString);\n      form.append('quantity', quantityToString);\n      this.shoppingService.editCustomerCartQuantity(form).subscribe({\n        next: res => {\n          if (res.includes('Edited Succefully')) {\n            this.toastr.success('Edited Succefully', 'Success');\n            const index = this.CartItems.findIndex(item => item.cartid === this.selectedCartId);\n            if (index !== -1) {\n              this.CartItems[index].quantity = quantity;\n              this.CartItems[index].totalPrice = parseInt(quantity) * this.CartItems[index].price;\n              this.TotalPrice = this.CartItems.reduce((total, item) => total + item.quantity * item.price, 0);\n              this.productquantity.nativeElement.value = '0';\n            }\n          }\n        },\n        error: error => {\n          if (error.status === 500) {\n            this.productquantity.nativeElement.value = '0';\n            this.toastr.warning(error.error, 'Warning');\n          }\n        }\n      });\n    }\n  }\n  deleteFromCart(cartId, productName) {\n    this.shoppingService.deleteCustomerCart(cartId).subscribe({\n      next: res => {\n        if (res.includes('Deleted Succefully')) {\n          this.toastr.success('Deleted Succefully', 'Success');\n          const index = this.CartItems.findIndex(item => item.cartid === cartId);\n          if (index !== -1) {\n            this.CartItems.splice(index, 1);\n            const findProductInCart = this.CartItems.findIndex(item => item.productName === productName);\n            if (findProductInCart !== -1) {\n              this.CartItems.length -= 1;\n              this.homepageCustomerService.setCartLength(this.CartItems.length);\n            }\n            this.calculateCartTotalPrice();\n          }\n        }\n      },\n      error: error => {\n        if (error.status === 500) {\n          this.toastr.error(error.error, 'Error');\n        }\n      }\n    });\n  }\n  getCustomerCart() {\n    this.shoppingService.getCustomerCarts().subscribe({\n      next: data => {\n        this.CartItems = data;\n        this.calculateCartTotalPrice();\n      },\n      error: error => {\n        this.toastr.error('Error Fetching Cart', 'Error');\n      }\n    });\n  }\n  calculateCartTotalPrice() {\n    this.TotalPrice = this.CartItems.reduce((total, item) => total + item.totalPrice, 0);\n  }\n  static #_ = this.ɵfac = function ShoppingCartComponent_Factory(t) {\n    return new (t || ShoppingCartComponent)(i0.ɵɵdirectiveInject(i1.ToastrService), i0.ɵɵdirectiveInject(i2.ShoppingServices), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.productService), i0.ɵɵdirectiveInject(i5.headerCustomerServices));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ShoppingCartComponent,\n    selectors: [[\"app-shopping-cart\"]],\n    viewQuery: function ShoppingCartComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.productquantity = _t.first);\n      }\n    },\n    decls: 51,\n    vars: 2,\n    consts: [[\"emptyCart\", \"\"], [\"productquantity\", \"\"], [\"id\", \"wrapper\"], [\"id\", \"sidebar-wrapper\"], [\"id\", \"menu\", 1, \"sidebar-nav\", \"nav-pills\", \"nav-stacked\"], [\"routerLink\", \"/Dashboard\"], [1, \"fa-stack\", \"fa-lg\", \"pull-left\"], [1, \"fa\", \"fa-dashboard\", \"fa-stack-1x\"], [\"routerLinkActive\", \"active\"], [\"routerLink\", \"/CustomerCart\"], [1, \"fa\", \"fa-cart-plus\", \"fa-stack-1x\"], [\"routerLink\", \"/Settings-Customer\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-database\", \"fa-stack-1x\"], [\"href\", \"#\"], [1, \"fa\", \"fa-support\", \"fa-stack-1x\"], [\"routerLink\", \"/Customer-Login\"], [1, \"fa\", \"fa-sign-out\", \"fa-stack-1x\"], [\"class\", \"container container cart-container\", 4, \"ngIf\"], [\"id\", \"editQuantityModal\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"editQuantityModalLabel\", \"aria-hidden\", \"true\", 1, \"modal\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"editQuantityModalLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"close\", \"p-2\", \"mt-1\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\"], [\"for\", \"quantity\"], [\"type\", \"number\", \"id\", \"quantity\", 1, \"form-control\", 3, \"ngModelChange\", \"ngModel\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", \"id\", \"saveQuantityBtn\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"container\", \"container\", \"cart-container\"], [1, \"row\", \"justify-content-center\"], [1, \"col-sm-12\", \"col-md-10\", \"col-md-offset-1\"], [1, \"table\", \"table-hover\"], [1, \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [1, \"text-right\"], [\"type\", \"button\", \"routerLink\", \"/Dashboard\", 1, \"btn\", \"btn-default\"], [1, \"glyphicon\", \"glyphicon-shopping-cart\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"glyphicon\", \"glyphicon-play\"], [1, \"col-md-3\"], [1, \"media\"], [\"href\", \"#\", 1, \"thumbnail\"], [1, \"media-object\", 3, \"src\"], [1, \"col-sm-1\", \"col-md-7\", 2, \"text-align\", \"center\"], [1, \"col-sm-1\", \"col-md-1\", 2, \"text-align\", \"center\"], [1, \"col-sm-1\", \"col-md-1\", \"text-center\"], [1, \"col-sm-1\", \"col-md-1\"], [\"type\", \"button\", 1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"glyphicon\", \"glyphicon-remove\"], [\"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#editQuantityModal\", 1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"glyphicon\", \"glyphicon-edit\"], [1, \"container\", \"container-empty\"]],\n    template: function ShoppingCartComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelement(0, \"app-header-customer\");\n        i0.ɵɵelementStart(1, \"div\", 2)(2, \"div\", 3)(3, \"ul\", 4)(4, \"li\")(5, \"a\", 5)(6, \"span\", 6);\n        i0.ɵɵelement(7, \"i\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(8, \" Dashboard\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"li\", 8)(10, \"a\", 9)(11, \"span\", 6);\n        i0.ɵɵelement(12, \"i\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(13, \"Cart\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"li\")(15, \"a\", 11)(16, \"span\", 6);\n        i0.ɵɵelement(17, \"i\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(18, \"Settings\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(19, \"li\")(20, \"a\", 13)(21, \"span\", 6);\n        i0.ɵɵelement(22, \"i\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(23, \"Help/Support\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"li\")(25, \"a\", 15)(26, \"span\", 6);\n        i0.ɵɵelement(27, \"i\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(28, \"Log Out\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵtemplate(29, ShoppingCartComponent_div_29_Template, 42, 2, \"div\", 17)(30, ShoppingCartComponent_ng_template_30_Template, 3, 0, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementStart(32, \"div\", 18)(33, \"div\", 19)(34, \"div\", 20)(35, \"div\", 21)(36, \"h5\", 22);\n        i0.ɵɵtext(37, \"Edit Quantity\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"button\", 23)(39, \"span\", 24);\n        i0.ɵɵtext(40, \"\\u00D7\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(41, \"div\", 25)(42, \"label\", 26);\n        i0.ɵɵtext(43, \"Quantity:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"input\", 27, 1);\n        i0.ɵɵtwoWayListener(\"ngModelChange\", function ShoppingCartComponent_Template_input_ngModelChange_44_listener($event) {\n          i0.ɵɵrestoreView(_r1);\n          const productquantity_r6 = i0.ɵɵreference(45);\n          i0.ɵɵtwoWayBindingSet(productquantity_r6.value, $event) || (productquantity_r6.value = $event);\n          return i0.ɵɵresetView($event);\n        });\n        i0.ɵɵlistener(\"ngModelChange\", function ShoppingCartComponent_Template_input_ngModelChange_44_listener() {\n          i0.ɵɵrestoreView(_r1);\n          const productquantity_r6 = i0.ɵɵreference(45);\n          return i0.ɵɵresetView(ctx.resetQuantity(productquantity_r6.value));\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(46, \"div\", 28)(47, \"button\", 29);\n        i0.ɵɵtext(48, \" Close \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"button\", 30);\n        i0.ɵɵlistener(\"click\", function ShoppingCartComponent_Template_button_click_49_listener() {\n          i0.ɵɵrestoreView(_r1);\n          return i0.ɵɵresetView(ctx.editQuantity());\n        });\n        i0.ɵɵtext(50, \" Save changes \");\n        i0.ɵɵelementEnd()()()()();\n      }\n      if (rf & 2) {\n        const productquantity_r6 = i0.ɵɵreference(45);\n        i0.ɵɵadvance(29);\n        i0.ɵɵproperty(\"ngIf\", ctx.CartItems.length > 0);\n        i0.ɵɵadvance(15);\n        i0.ɵɵtwoWayProperty(\"ngModel\", productquantity_r6.value);\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i7.DefaultValueAccessor, i7.NumberValueAccessor, i7.NgControlStatus, i7.NgModel, i3.RouterLink, i3.RouterLinkActive, i8.HeaderCustomerComponent],\n    styles: [\"\\n (()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n\\n \\t\\\"use strict\\\";\\n\\n \\t\\n\\n \\t\\n\\n })()[_ngcontent-%COMP%]\\n;\"]\n  });\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtext","ɵɵlistener","ShoppingCartComponent_div_29_tr_18_Template_button_click_18_listener","carts_r4","ɵɵrestoreView","_r3","$implicit","ctx_r4","ɵɵnextContext","ɵɵresetView","deleteFromCart","cartid","productName","ShoppingCartComponent_div_29_tr_18_Template_button_click_22_listener","setCartId_Quantity","quantity","ɵɵadvance","ɵɵproperty","imageUrl","ɵɵsanitizeUrl","ɵɵtextInterpolate","ɵɵtextInterpolate1","price","totalPrice","ɵɵtemplate","ShoppingCartComponent_div_29_tr_18_Template","ShoppingCartComponent_div_29_Template_button_click_39_listener","_r2","addOrder","CartItems","TotalPrice","ShoppingCartComponent","constructor","toastr","shoppingService","router","currentRoute","addProductService","homepageCustomerService","sendCart","Products","ngAfterViewChecked","setCartLength","length","ngOnInit","getCustomerCart","productquantity","nativeElement","valueAsNumber","selectedCartId","resetQuantity","parseInt","warning","value","getAllProducts","subscribe","next","data","error","res","includes","success","editQuantity","undefined","form","FormData","cartIdToString","toString","quantityToString","append","editCustomerCartQuantity","index","findIndex","item","reduce","total","status","cartId","deleteCustomerCart","splice","findProductInCart","calculateCartTotalPrice","getCustomerCarts","_","ɵɵdirectiveInject","i1","ToastrService","i2","ShoppingServices","i3","Router","ActivatedRoute","i4","productService","i5","headerCustomerServices","_2","selectors","viewQuery","ShoppingCartComponent_Query","rf","ctx","ShoppingCartComponent_div_29_Template","ShoppingCartComponent_ng_template_30_Template","ɵɵtemplateRefExtractor","ɵɵtwoWayListener","ShoppingCartComponent_Template_input_ngModelChange_44_listener","$event","_r1","productquantity_r6","ɵɵreference","ɵɵtwoWayBindingSet","ShoppingCartComponent_Template_button_click_49_listener","ɵɵtwoWayProperty"],"sources":["D:\\Angular\\CenterApp\\src\\app\\header-customer\\shopping-cart\\shopping-cart.component.ts","D:\\Angular\\CenterApp\\src\\app\\header-customer\\shopping-cart\\shopping-cart.component.html"],"sourcesContent":["import {\n  AfterViewChecked,\n  AfterViewInit,\n  Component,\n  ElementRef,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { ShoppingServices } from './Shopping.service';\nimport { ActivatedRoute, Route, Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { of } from 'rxjs';\nimport { error } from 'jquery';\nimport { HeaderCustomerComponent } from '../header-customer.component';\nimport { CartCustomerService } from 'src/app/customer/CartCustomer.service';\nimport { productService } from 'src/app/homepage/products/products.service';\nimport { headerCustomerServices } from '../header-customer.service';\n@Component({\n  selector: 'app-shopping-cart',\n  templateUrl: './shopping-cart.component.html',\n  styleUrls: ['./shopping-cart.component.css'],\n})\nexport class ShoppingCartComponent implements OnInit, AfterViewChecked {\n  CartItems: any[] = [];\n  @ViewChild('productquantity', { static: true })\n  productquantity!: ElementRef<HTMLInputElement>;\n  TotalPrice!: number;\n  selectedCartId!: number | string;\n  sendCart: any[] = [];\n  Products: any[] = [];\n\n  constructor(\n    private toastr: ToastrService,\n    private shoppingService: ShoppingServices,\n    private router: Router,\n    private currentRoute: ActivatedRoute,\n    private addProductService: productService,\n    private homepageCustomerService:headerCustomerServices\n\n  ) {}\n  ngAfterViewChecked(): void {\n    this.homepageCustomerService.setCartLength(this.CartItems.length);\n  }\n  ngOnInit() {\n    this.getCustomerCart();\n  }\n\n  setCartId_Quantity(cartid: number, quantity: number) {\n    this.productquantity.nativeElement.valueAsNumber = quantity;\n    this.selectedCartId = cartid;\n  }\n\n  resetQuantity(quantity: string) {\n    if (parseInt(quantity) < 0) {\n      this.toastr.warning('Invalid Quantity', 'Warning');\n      this.productquantity.nativeElement.value = '0';\n    }\n  }\n  getAllProducts(): void {\n    this.addProductService.getAllProducts().subscribe({\n      next: (data: any[]) => {\n        this.Products = data;\n      },\n      error: (error) => {\n        this.toastr.error('Error Fetching  products', 'Error');\n      },\n    });\n  }\n  addOrder() {\n    this.shoppingService.addOrder().subscribe({\n      next: (res) => {\n        if (res.includes('Order Added Succefully')) {\n          this.toastr.success('Order Added Succefully', 'Success');\n          this.CartItems = [];\n        }\n      },\n      error: (error) => {\n        this.toastr.warning(error.error, 'Warning');\n      },\n    });\n  }\n  editQuantity() {\n    if (this.selectedCartId !== undefined) {\n      const quantity = this.productquantity.nativeElement?.value;\n      const form = new FormData();\n      let cartIdToString = this.selectedCartId.toString();\n      let quantityToString = quantity;\n      form.append('cartId', cartIdToString);\n      form.append('quantity', quantityToString);\n      this.shoppingService.editCustomerCartQuantity(form).subscribe({\n        next: (res) => {\n          if (res.includes('Edited Succefully')) {\n            this.toastr.success('Edited Succefully', 'Success');\n            const index = this.CartItems.findIndex(\n              (item) => item.cartid === this.selectedCartId\n            );\n            if (index !== -1) {\n              this.CartItems[index].quantity = quantity;\n              this.CartItems[index].totalPrice =\n                parseInt(quantity) * this.CartItems[index].price;\n              this.TotalPrice = this.CartItems.reduce(\n                (total: number, item: { quantity: number; price: number }) =>\n                  total + item.quantity * item.price,\n                0\n              );\n              this.productquantity.nativeElement.value = '0';\n            }\n          }\n        },\n        error: (error) => {\n          if (error.status === 500) {\n            this.productquantity.nativeElement.value = '0';\n            this.toastr.warning(error.error, 'Warning');\n          }\n        },\n      });\n    }\n  }\n\n  deleteFromCart(cartId: number, productName:string) {\n    this.shoppingService.deleteCustomerCart(cartId).subscribe({\n      next: (res) => {\n        if (res.includes('Deleted Succefully')) {\n          this.toastr.success('Deleted Succefully', 'Success');\n          const index = this.CartItems.findIndex(\n            (item) => item.cartid === cartId\n          );\n          if (index !== -1) {\n            this.CartItems.splice(index, 1);\n            const findProductInCart = this.CartItems.findIndex(\n              (item) => item.productName === productName\n            );\n            if (findProductInCart !== -1) {\n              this.CartItems.length -= 1;\n              this.homepageCustomerService.setCartLength(this.CartItems.length);\n            }\n            this.calculateCartTotalPrice();\n          }\n        }\n      },\n      error: (error) => {\n        if (error.status === 500) {\n          this.toastr.error(error.error, 'Error');\n        }\n      },\n    });\n  }\n  getCustomerCart(): void {\n    this.shoppingService.getCustomerCarts().subscribe({\n      next: (data: any[]) => {\n        this.CartItems = data;\n        this.calculateCartTotalPrice();\n      },\n      error: (error) => {\n        this.toastr.error('Error Fetching Cart', 'Error');\n      },\n    });\n  }\n  calculateCartTotalPrice() {\n    this.TotalPrice = this.CartItems.reduce(\n      (total, item) => total + item.totalPrice,\n      0\n    );\n  }\n}\n","<app-header-customer></app-header-customer>\n\n<div id=\"wrapper\">\n  <div id=\"sidebar-wrapper\">\n    <ul class=\"sidebar-nav nav-pills nav-stacked\" id=\"menu\">\n      <li>\n        <a routerLink=\"/Dashboard\"\n          ><span class=\"fa-stack fa-lg pull-left\"\n            ><i class=\"fa fa-dashboard fa-stack-1x\"></i\n          ></span>\n          Dashboard</a\n        >\n      </li>\n      <li routerLinkActive=\"active\">\n        <a routerLink=\"/CustomerCart\"\n          ><span class=\"fa-stack fa-lg pull-left\">\n            <i class=\"fa fa-cart-plus fa-stack-1x\"></i> </span\n          >Cart</a\n        >\n      </li>\n      <li>\n        <a routerLink=\"/Settings-Customer\">\n          <span class=\"fa-stack fa-lg pull-left\">\n            <i class=\"fa fa-database fa-stack-1x\" aria-hidden=\"true\"></i> </span\n          >Settings</a\n        >\n      </li>\n      <li>\n        <a href=\"#\"\n          ><span class=\"fa-stack fa-lg pull-left\"\n            ><i class=\"fa fa-support fa-stack-1x\"></i></span\n          >Help/Support</a\n        >\n      </li>\n      <li>\n        <a routerLink=\"/Customer-Login\"\n          ><span class=\"fa-stack fa-lg pull-left\"\n            ><i class=\"fa fa-sign-out fa-stack-1x\"></i></span\n          >Log Out</a\n        >\n      </li>\n    </ul>\n  </div>\n</div>\n<div class=\"container container cart-container\" *ngIf=\"CartItems.length > 0\">\n  <div class=\"row justify-content-center\">\n    <div class=\"col-sm-12 col-md-10 col-md-offset-1\">\n      <table class=\"table table-hover\">\n        <thead>\n          <tr>\n            <th>Product Image</th>\n            <th class=\"text-center\">Name</th>\n            <th class=\"text-center\">Quantity</th>\n            <th class=\"text-center\">Price</th>\n            <th class=\"text-center\">Total</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let carts of CartItems\">\n            <td class=\"col-md-3\">\n              <div class=\"media\">\n                <a class=\"thumbnail\" href=\"#\">\n                  <img class=\"media-object\" [src]=\"carts.imageUrl\" />\n                </a>\n              </div>\n            </td>\n            <td class=\"col-sm-1 col-md-7\" style=\"text-align: center\">\n              <strong>{{ carts.productName }}</strong>\n            </td>\n            <td class=\"col-sm-1 col-md-1\" style=\"text-align: center\">\n              <strong>{{ carts.quantity }}</strong>\n            </td>\n            <td class=\"col-sm-1 col-md-1 text-center\">\n              <strong>{{ carts.price }}$</strong>\n            </td>\n            <td class=\"col-sm-1 col-md-1 text-center\">\n              <strong>{{ carts.totalPrice }}$</strong>\n            </td>\n            <td class=\"col-sm-1 col-md-1\">\n              <button\n                type=\"button\"\n                class=\"btn btn-danger\"\n                (click)=\"deleteFromCart(carts.cartid,carts.productName)\"\n              >\n                <span class=\"glyphicon glyphicon-remove\"></span> Remove\n              </button>\n            </td>\n            <td class=\"col-sm-1 col-md-1\">\n              <button\n                class=\"btn btn-success\"\n                data-bs-toggle=\"modal\"\n                data-bs-target=\"#editQuantityModal\"\n                (click)=\"setCartId_Quantity(carts.cartid, carts.quantity)\"\n              >\n                <span class=\"glyphicon glyphicon-edit\"></span> Edit\n              </button>\n            </td>\n          </tr>\n\n          <tr>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td><h3>Total</h3></td>\n            <td class=\"text-right\">\n              <h3>\n                <strong>{{ TotalPrice }}$</strong>\n              </h3>\n            </td>\n          </tr>\n          <tr>\n            <td></td>\n            <td></td>\n            <td></td>\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-default\"\n                routerLink=\"/Dashboard\"\n              >\n                <span class=\"glyphicon glyphicon-shopping-cart\"></span> Continue\n                Shopping\n              </button>\n            </td>\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-success\"\n                (click)=\"addOrder()\"\n              >\n                Checkout <span class=\"glyphicon glyphicon-play\"></span>\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n<ng-template #emptyCart>\n  <div class=\"container container-empty\">\n    <p>Your cart is empty.</p>\n  </div>\n</ng-template>\n\n<div\n  class=\"modal\"\n  id=\"editQuantityModal\"\n  tabindex=\"-1\"\n  role=\"dialog\"\n  aria-labelledby=\"editQuantityModalLabel\"\n  aria-hidden=\"true\"\n>\n  <div class=\"modal-dialog\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"editQuantityModalLabel\">Edit Quantity</h5>\n        <button\n          type=\"button\"\n          class=\"close p-2 mt-1\"\n          data-bs-dismiss=\"modal\"\n          aria-label=\"Close\"\n        >\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <label for=\"quantity\">Quantity:</label>\n        <input\n          type=\"number\"\n          id=\"quantity\"\n          class=\"form-control\"\n          [(ngModel)]=\"productquantity.value\"\n          (ngModelChange)=\"resetQuantity(productquantity.value)\"\n          #productquantity\n        />\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\n          Close\n        </button>\n        <button\n          type=\"button\"\n          class=\"btn btn-primary\"\n          id=\"saveQuantityBtn\"\n          (click)=\"editQuantity()\"\n        >\n          Save changes\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}